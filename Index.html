<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>UK House Extension Cost Estimator</title>
    <!-- Include Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for image selection */
        .option-image {
            width: 100px;
            height: 100px;
            border: 2px solid transparent;
            cursor: pointer;
        }
        .option-image.selected {
            border-color: blue;
        }
    </style>
</head>
<body class="bg-blue-900">
    <div class="max-w-3xl mx-auto p-6 bg-white shadow-md mt-10 rounded-3xl">
        <!-- Main Heading -->
        <div class="text-center border-2 border-gray-300 p-4 mb-6 rounded-3xl">
            <h1 class="text-3xl font-bold mb-4 bg-blue-600 text-white p-4 rounded-lg">House Extension Cost Estimator</h1>
        </div>
        <form id="cost-estimator-form">
            <!-- Extension Type -->
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">Extension Type:</label>
                <div class="flex space-x-4">
                    <label>
                        <input type="radio" name="extension-type" value="single-story" class="hidden" checked>
                        <img src="placeholder-single-story.jpg" alt="Single Story Extension" class="option-image">
                        <p class="text-center">Single Story</p>
                    </label>
                    <label>
                        <input type="radio" name="extension-type" value="two-story" class="hidden">
                        <img src="placeholder-two-story.jpg" alt="Two-Story Extension" class="option-image">
                        <p class="text-center">Two-Story</p>
                    </label>
                    <label>
                        <input type="radio" name="extension-type" value="wraparound" class="hidden">
                        <img src="placeholder-wraparound.jpg" alt="Wraparound Extension" class="option-image">
                        <p class="text-center">Wraparound</p>
                    </label>
                    <label>
                        <input type="radio" name="extension-type" value="loft-conversion" class="hidden">
                        <img src="placeholder-loft.jpg" alt="Loft Conversion" class="option-image">
                        <p class="text-center">Loft Conversion</p>
                    </label>
                    <label>
                        <input type="radio" name="extension-type" value="basement-conversion" class="hidden">
                        <img src="placeholder-basement.webp" alt="Basement Conversion" class="option-image">
                        <p class="text-center">Basement</p>
                    </label>
                </div>
            </div>
            <!-- Extension Size -->
            <div class="mb-6">
                <label for="extension-size" class="block text-gray-700 font-bold mb-2">Extension Size (square meters): <span id="size-value">20</span> sqm</label>
                <input type="range" id="extension-size" name="extension-size" min="10" max="100" step="1" value="20" class="w-full">
            </div>
            <!-- Location -->
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">Location:</label>
                <div class="flex space-x-4">
                    <label>
                        <input type="radio" name="location" value="london" class="hidden" checked>
                        <img src="placeholder-london.png" alt="London and South East" class="option-image">
                        <p class="text-center">London & SE</p>
                    </label>
                    <label>
                        <input type="radio" name="location" value="other" class="hidden">
                        <img src="placeholder-other.png" alt="Other Regions" class="option-image">
                        <p class="text-center">Other Regions</p>
                    </label>
                </div>
            </div>
            <!-- Materials -->
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">Materials:</label>
                <div>
                    <label class="inline-flex items-center">
                        <input type="radio" name="materials" value="standard" class="form-radio" checked>
                        <span class="ml-2">Standard Materials</span>
                    </label>
                </div>
                <div>
                    <label class="inline-flex items-center">
                        <input type="radio" name="materials" value="premium" class="form-radio">
                        <span class="ml-2">Premium Materials</span>
                    </label>
                </div>
            </div>
            <!-- Complexity -->
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">Complexity:</label>
                <div>
                    <label class="inline-flex items-center">
                        <input type="radio" name="complexity" value="simple" class="form-radio" checked>
                        <span class="ml-2">Simple Design</span>
                    </label>
                </div>
                <div>
                    <label class="inline-flex items-center">
                        <input type="radio" name="complexity" value="complex" class="form-radio">
                        <span class="ml-2">Complex Design</span>
                    </label>
                </div>
            </div>
            <!-- Base Cost -->
            <div class="mt-6 mb-6 text-center border-2 border-gray-300 p-4 rounded-3xl">
                <h2 class="text-2xl font-bold">Base Cost: £<span id="base-cost">0</span></h2>
            </div>
            <!-- Additional Costs -->
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">Additional Costs:</label>
                <div class="grid grid-cols-2 gap-4 ml-4">
                    <label class="inline-flex items-center">
                        <input type="checkbox" name="additional-costs" value="architect-fees" class="form-checkbox">
                        <span class="ml-2">Architect Fees (<strong>10% of base cost</strong> - £<span id="architect-fee">0.0</span>k)</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" name="additional-costs" value="engineering-fees" class="form-checkbox">
                        <span class="ml-2">Engineering Fees (<strong>£1,500 avg</strong>)</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" name="additional-costs" value="planning-permission" class="form-checkbox">
                        <span class="ml-2">Planning Permission (<strong>£206</strong>)</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" name="additional-costs" value="building-regulations" class="form-checkbox">
                        <span class="ml-2">Building Regulations (<strong>£725 avg</strong>)</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" name="additional-costs" value="vat" class="form-checkbox">
                        <span class="ml-2">VAT (<strong>20% of subtotal</strong>)</span>
                    </label>
                </div>
            </div>
            <!-- Total Estimated Cost -->
            <div class="mt-6 text-center border-2 border-gray-300 p-4">
                <h2 class="text-2xl font-bold">Total Estimated Cost: £<span id="estimated-cost">0</span></h2>
            </div>
        </form>
    </div>
    <!-- JavaScript to handle the calculations -->
    <script>
        const form = document.getElementById('cost-estimator-form');
        const sizeInput = document.getElementById('extension-size');
        const sizeValue = document.getElementById('size-value');
        const baseCostElement = document.getElementById('base-cost');
        const estimatedCostElement = document.getElementById('estimated-cost');

        // Function to update selected images
        function updateSelectedImages() {
            // Extension Type Images
            document.querySelectorAll('input[name="extension-type"]').forEach((input) => {
                const img = input.nextElementSibling;
                if (input.checked) {
                    img.classList.add('selected');
                } else {
                    img.classList.remove('selected');
                }
            });
            // Location Images
            document.querySelectorAll('input[name="location"]').forEach((input) => {
                const img = input.nextElementSibling;
                if (input.checked) {
                    img.classList.add('selected');
                } else {
                    img.classList.remove('selected');
                }
            });
        }

        function calculateCost() {
            const formData = new FormData(form);
            const extensionType = formData.get('extension-type');
            const size = parseInt(formData.get('extension-size'));
            const location = formData.get('location');
            const materials = formData.get('materials');
            const complexity = formData.get('complexity');
            const additionalCosts = formData.getAll('additional-costs');

            let costPerSqM;
            switch(extensionType) {
                case 'single-story':
                    costPerSqM = 1700;
                    if (materials === 'premium') costPerSqM += 300;
                    if (complexity === 'complex') costPerSqM += 500;
                    break;
                case 'two-story':
                    costPerSqM = 1500;
                    if (materials === 'premium') costPerSqM += 300;
                    if (complexity === 'complex') costPerSqM += 500;
                    break;
                case 'wraparound':
                    costPerSqM = 2000;
                    if (materials === 'premium') costPerSqM += 500;
                    if (complexity === 'complex') costPerSqM += 700;
                    break;
                case 'loft-conversion':
                    costPerSqM = 1500;
                    if (materials === 'premium') costPerSqM += 300;
                    if (complexity === 'complex') costPerSqM += 500;
                    break;
                case 'basement-conversion':
                    costPerSqM = 2500;
                    if (materials === 'premium') costPerSqM += 500;
                    if (complexity === 'complex') costPerSqM += 700;
                    break;
                default:
                    costPerSqM = 0;
            }

            // Adjust for location
            if (location === 'london') {
                costPerSqM *= 1.2; // 20% increase for London
            }

            let baseCost = costPerSqM * size;

            // Display base cost
            baseCostElement.textContent = baseCost.toLocaleString('en-GB', { maximumFractionDigits: 0 });

            // Additional Costs
            let additionalCostTotal = 0;

            if (additionalCosts.includes('architect-fees')) {
                const architectFee = (baseCost * 0.10) / 1000; // Convert to thousands
                additionalCostTotal += architectFee * 1000; // Add the full amount to the total
                document.getElementById('architect-fee').textContent = architectFee.toFixed(1); // Display with one decimal place
            } else {
                document.getElementById('architect-fee').textContent = '0.0';
            }

            if (additionalCosts.includes('engineering-fees')) {
                // Engineering fees: £500 to £2500
                additionalCostTotal += 1500; // average
            }
            if (additionalCosts.includes('planning-permission')) {
                // Planning permission: £206
                additionalCostTotal += 206;
            }
            if (additionalCosts.includes('building-regulations')) {
                // Building regulations: £600 to £850
                additionalCostTotal += 725; // average
            }

            let subtotal = baseCost + additionalCostTotal;

            if (additionalCosts.includes('vat')) {
                // VAT: 20% of subtotal
                const vat = subtotal * 0.20;
                additionalCostTotal += vat;
            }

            const totalCost = baseCost + additionalCostTotal;

            // Format the total cost
            const formattedTotalCost = totalCost.toLocaleString('en-GB', { maximumFractionDigits: 0 });

            estimatedCostElement.textContent = formattedTotalCost;
        }

        // Update size value display
        sizeInput.addEventListener('input', function() {
            sizeValue.textContent = sizeInput.value;
            calculateCost();
        });

        // Add event listeners to form inputs
        form.addEventListener('input', function() {
            updateSelectedImages();
            calculateCost();
        });

        // Initial calculation and image selection
        updateSelectedImages();
        calculateCost();
    </script>
</body>
</html>